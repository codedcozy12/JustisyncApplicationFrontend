<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>JustiSync - Review Case</title>
  <link rel="shortcut icon" href="../../GeneralDashboard/scale of justice.png" type="image/x-icon">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <style>
    :root {
      --js-primary: #0b3d91;
      --js-accent: #f59e0b;
      --js-bg: #f3f4f6;
    }
  </style>
</head>
<body class="bg-[var(--js-bg)] text-gray-800">

  <div class="container mx-auto p-4 sm:p-6 md:p-8">
    <main>
      <div class="mb-8">
        <a href="/Roles/Registrar/Registrar.html" class="inline-flex items-center text-[var(--js-primary)] font-semibold hover:underline">
          <svg class="w-5 h-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>
          Back to Dashboard
        </a>
      </div>
      <header class="mb-8 text-center">
        <h2 class="text-3xl font-bold text-gray-800">Review Case Filing</h2>
        <p class="text-gray-500">Verify the case details and jurisdiction, then approve or reject the filing.</p>
      </header>

      <section id="loading-container" class="text-center p-8">
        <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-[var(--js-primary)] mx-auto"></div>
        <p class="mt-4 text-gray-500">Loading case details...</p>
      </section>

      <section id="review-container" class="hidden bg-white rounded-xl shadow-sm p-8 max-w-4xl mx-auto">
        
        <!-- Case Details (Read-only) -->
        <fieldset class="border p-4 rounded-lg mb-6">
          <legend class="text-lg font-semibold px-2 text-gray-700">Case Details</legend>
          <div class="space-y-4 mt-2">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <label class="block text-sm font-medium text-gray-500">Case Title</label>
                <p id="case-title" class="mt-1 text-gray-800 font-semibold"></p>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-500">Case Number</label>
                <p id="case-number" class="mt-1 text-gray-800"></p>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-500">Client</label>
                <p id="client-name" class="mt-1 text-gray-800"></p>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-500">Lawyer</label>
                <p id="lawyer-name" class="mt-1 text-gray-800"></p>
              </div>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-500">Description</label>
              <p id="case-description" class="mt-1 text-gray-600 whitespace-pre-wrap"></p>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-500">Documents</label>
              <div id="document-list" class="mt-1 text-gray-600"></div>
            </div>
          </div>
        </fieldset>

        <!-- Registrar Action Form -->
        <form id="verification-form" class="space-y-6">
          <fieldset class="border p-4 rounded-lg">
            <legend class="text-lg font-semibold px-2 text-gray-700">Verification Action</legend>
            <div class="mt-4">
              <label for="approvalStatus" class="block text-sm font-medium text-gray-700">Action</label>
              <select id="approvalStatus" name="ApprovalStatus" required class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-[var(--js-primary)] focus:ring-[var(--js-primary)]">
                <option value="" disabled selected>Choose an action...</option>
                <option value="0">Approve and Schedule</option>
                <option value="1">Reject</option>
              </select>
            </div>

            <!-- Fields for Approval -->
            <div id="approval-fields" class="hidden mt-4 space-y-4">
              <div>
                <label for="judgeId" class="block text-sm font-medium text-gray-700">Assign Judge</label>
                <select id="judgeId" name="JudgeId" class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-[var(--js-primary)] focus:ring-[var(--js-primary)]">
                  <option value="">Loading judges...</option>
                </select>
              </div>
              <div>
                <label for="scheduleDate" class="block text-sm font-medium text-gray-700">Schedule Hearing Date</label>
                <input type="datetime-local" id="scheduleDate" name="ScheduleDate" class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-[var(--js-primary)] focus:ring-[var(--js-primary)]">
              </div>
            </div>

            <!-- Field for Rejection -->
            <div id="rejection-fields" class="hidden mt-4">
              <label for="rejectionReason" class="block text-sm font-medium text-gray-700">Reason for Rejection</label>
              <textarea id="rejectionReason" name="RejectionReason" rows="3" class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-[var(--js-primary)] focus:ring-[var(--js-primary)]" placeholder="Provide a clear reason for rejecting this case filing..."></textarea>
            </div>
          </fieldset>

          <div class="flex justify-end pt-4">
            <button type="submit" class="bg-[var(--js-primary)] text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-800 transition w-full md:w-auto">
              Submit Decision
            </button>
          </div>
        </form>
      </section>
    </main>
  </div>

  <script src="ReviewCase.js"></script>
</body>
</html>