<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>JustiSync - Chat</title>
  <link rel="shortcut icon" href="../../GeneralDashboard/scale of justice.png" type="image/x-icon">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/microsoft-signalr/6.0.1/signalr.min.js"></script>
  <style>
    :root {
      --js-primary: #0b3d91;
      --js-accent: #f59e0b;
      --js-bg: #f3f4f6;
    }
    .custom-scrollbar::-webkit-scrollbar {
      width: 6px;
    }
    .custom-scrollbar::-webkit-scrollbar-track {
      background: #f1f1f1;
    }
    .custom-scrollbar::-webkit-scrollbar-thumb {
      background: #ccc;
      border-radius: 6px;
    }
    .custom-scrollbar::-webkit-scrollbar-thumb:hover {
      background: #aaa;
    }
    .chat-bg {
        background-color: #e5ddd5; 

        background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23919191' fill-opacity='0.08'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
    }
  </style>
</head>
<body class="bg-[var(--js-bg)] text-gray-800">

  <div class="flex h-screen overflow-hidden">

        <div class="w-full md:w-1/3 lg:w-1/4 bg-white border-r border-gray-200 flex flex-col">
          <div class="p-4 border-b flex items-center justify-between">
            <h2 class="font-bold text-xl text-gray-800">Chats</h2>
            <button id="back-to-dashboard" title="Back to Dashboard" class="text-gray-500 hover:text-[var(--js-primary)] p-1 rounded-full">
              <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1" />
              </svg>
            </button>
          </div>
          <div class="p-4 border-b">
            <input type="text" id="search-conversations" placeholder="Search or start new chat" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--js-primary)] mt-2 text-sm">
          </div>
          <div id="conversations-list" class="flex-1 overflow-y-auto custom-scrollbar">
            <div class="p-4 text-center text-gray-500">Loading conversations...</div>
          </div>
        </div>

        <div class="flex-1 flex flex-col chat-bg">
          <div id="no-chat-selected" class="flex flex-col items-center justify-center h-full text-gray-500">
            <svg class="w-24 h-24" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path></svg>
            <h3 class="mt-4 text-xl">Select a conversation to start chatting</h3>
            <p class="text-sm">Keep your conversations organized and secure.</p>
          </div>

          <div id="active-chat-container" class="hidden flex-col h-full">

            <header class="flex items-center justify-between p-3 bg-gray-100 border-b border-gray-200 flex-shrink-0">
              <div class="flex items-center">
                <img id="chat-partner-avatar" src="../../assets/Avatar.png" class="w-10 h-10 rounded-full mr-3 object-cover">
                <div>
                  <h3 id="chat-partner-name" class="font-semibold">Select a Chat</h3>
                  <p id="chat-partner-status" class="text-xs text-green-500">Online</p>
                </div>
              </div>
            </header>

            <div id="messages-area" class="flex-1 p-4 md:p-6 overflow-y-auto custom-scrollbar">
             
            </div>

            <footer class="p-4 bg-gray-100 border-t border-gray-200 flex-shrink-0">
              <form id="message-form" class="flex items-center">
                <input id="message-input" type="text" placeholder="Type a message..." autocomplete="off" class="flex-1 px-4 py-2 border rounded-full focus:outline-none focus:ring-2 focus:ring-[var(--js-primary)]">
                <button type="submit" class="ml-3 bg-[var(--js-primary)] text-white p-2 rounded-full hover:bg-blue-800 transition">
                  <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path></svg> <!-- Send Icon -->
                </button>
              </form>
            </footer>
          </div>
        </div>
  </div>

  <script src="Chat.js"></script>
</body>
</html>